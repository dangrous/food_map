const METERS_TO_MILES = 1609.344

const MAPBOX_TOKEN =
  'pk.eyJ1IjoiZGFuZ3JvdXMiLCJhIjoiY2wxcXQ0dWY5MTg0eDNqbXRkM2hsc3RuayJ9.143413zMeCypYgpZJ2dY0A'

const map = L.map('map').setView([37.8, -96], 4)

const tiles = L.tileLayer(
  `https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=${MAPBOX_TOKEN}`,
  {
    id: 'mapbox/light-v10',
    attribution: 'cool',
    tileSize: 512,
    zoomOffset: -1,
  }
).addTo(map)

const locations = []

// Get Shake Shacks
// const shakeShacks = fetch(
//   'https://afternoon-thicket-58511.herokuapp.com/https://shakeshack.com/locations'
// )
//   .then((response) => response.text())
//   .then((pageText) => {
//     const regexp = /data-lat="([-\d\.]*)" data-lng="([-\d\.]*)"/gm

//     const locations = [...pageText.matchAll(regexp)]

//     const shakeShacks = []

//     for (let location of locations) {
//       let newLocation = [parseFloat(location[1]), parseFloat(location[2])]
//       shakeShacks.push(newLocation)
//     }

//     return shakeShacks
//   })

const mapShakeShacks = () => {
  const backup = [
    [40.758268127546, -73.845572299875],
    [43.072942238042, -73.772552057489],
    [25.118178057879, 55.200591373162],
    [38.873942461202, -77.006196172931],
    [29.302725283384, 47.936071898039],
    [29.302725283384, 47.936071898039],
    [25.259255050306, 51.444246413313],
    [24.33336752614, 54.52401152864],
    [25.243419878141, 55.372305113313],
    [29.341458347081, 48.073597311534],
    [40.642617965902, -73.783208515219],
    [41.110215735116, 29.032123913627],
    [51.511931490625, -0.12239871308784],
    [25.195586154016, 55.279190484477],
    [25.216612118795, 55.251999624959],
    [29.321601709494, 48.01684875571],
    [41.232473456486, 29.01733169824],
    [25.08111282141, 55.132697165827],
    [40.642601684097, -73.783187057548],
    [29.174985440038, 48.099154998037],
    [24.492132655175, 54.608652652662],
    [51.54379198075, -0.0059271149342611],
    [29.148622975968, 48.12806381153],
    [35.673522992448, 139.71991637118],
    [25.336172617993, 51.46080164215],
    [51.517010707116, -0.12814515726437],
    [51.479471853364, -3.1747001437714],
    [36.108880441445, -115.17555659673],
    [35.646733413852, 139.70954208467],
    [26.234851608349, 50.553801094588],
    [37.502976588461, 127.0256689117],
    [24.689906384992, 46.686329326798],
    [35.67654244703, 139.76348186933],
    [39.901418567783, -75.171907228731],
    [51.510645493832, -0.13168374378069],
    [51.504855742745, -0.018824816782704],
    [24.689625441347, 46.673723455634],
    [51.496997086461, -0.1443481149356],
    [29.319504326845, 48.088384713381],
    [24.809389205481, 46.668125097965],
    [29.75746576216, -95.354962230788],
    [37.569410387677, 127.00898495403],
    [35.686364535505, 139.700635927],
    [39.278245214445, -76.62167835758],
    [37.652996540526, 126.89592445044],
    [25.388271902131, 51.441377806379],
    [41.1077686736, 28.987283127121],
    [35.6623704021, 139.73035954049],
    [21.628686974992, 39.111040684425],
    [24.744025066647, 46.65830018447],
    [37.468832078189, 126.43384335587],
    [35.705437712884, 139.75280155583],
    [35.618436418534, 139.62741751354],
    [37.504317127888, 127.00313357121],
    [22.285551879536, 114.15887605375],
    [34.701498738595, 135.49899635386],
    [29.07832854891, 48.138935184541],
    [51.512706019735, -0.093735799593819],
    [33.642991944612, -84.439303646055],
    [22.277882972058, 114.16538287102],
    [40.774225476094, -73.869492930557],
    [29.276129514003, 48.024856699104],
    [32.89987135243, -97.037939101893],
    [33.434578695159, -112.01074614421],
    [35.306101524702, 138.96168841165],
    [41.410845748458, -81.838734315201],
    [37.380216237076, 126.66026521354],
    [39.905037604125, -75.167050515236],
    [35.005620931132, 135.76118739815],
    [1.3606811668513, 103.99002146894],
    [51.485697441812, 0.28266006972272],
    [23.645918998684, 58.148023269112],
    [40.198683022239, -74.099147288242],
    [29.251872496251, 47.960819469203],
    [35.153319109775, 129.05961248466],
    [35.239831385735, 129.06942658118],
    [24.501295940259, 54.389971232063],
    [34.674356636723, 135.50122547612],
    [31.223110998705, 121.4493413698],
    [22.295378422927, 114.1673063608],
    [36.084897066592, -115.1518042595],
    [51.161272319779, -0.17869197538851],
    [29.998756384207, -90.256028180804],
    [31.23777466567, 121.50225496485],
    [44.882222229695, -93.205615930456],
    [35.221142687413, -80.941027944175],
    [14.584083386479, 121.05587878435],
    [26.073313271434, -80.143573600168],
    [22.304231786325, 114.16214449978],
    [25.114545333197, 55.138803742146],
    [37.530509037941, 126.90386009581],
    [40.994077639253, 29.122024855954],
    [25.783817940431, 55.96561239798],
    [22.381716441922, 114.18829014026],
    [1.2788830101523, 103.84165762476],
    [31.192447604457, 121.3342433539],
    [25.252295948424, 55.332824076807],
    [35.869253786489, 128.59897817303],
    [1.3055457869043, 103.83075663243],
    [39.934645630509, 116.45481737553],
    [40.785404948747, -111.98530117289],
    [1.2937959298923, 103.85795039777],
    [24.486935441408, 54.347220837836],
    [14.552848943734, 121.02043384017],
    [1.2636854924804, 103.82129309777],
    [39.934639272056, 116.4547951099],
    [29.373397070836, 48.00760534037],
    [25.047226161472, 55.243079840298],
    [37.655135150005, 127.06153129608],
    [22.146795603926, 113.56491514026],
    [39.93457345901, 116.45488094059],
    [1.2943057820312, 103.83207726894],
    [22.285571734434, 114.15897261327],
    [29.272222748639, 47.992601512498],
    [41.262177764222, 28.742701085452],
    [37.569359364624, 127.00907078471],
    [39.762484936096, -104.98077652689],
    [19.428209499335, -99.167709257932],
    [19.430239819483, -99.167591744387],
    [19.511051256997, -99.234955273272],
    [19.293776305329, -99.126480060406],
    [19.422450916854, -99.167479916694],
    [19.387752854979, -99.174277103957],
    [37.517235, 127.047325],
    [14.408133, 121.041466],
    [1.29027, 103.851959],
    [35.803329011455, -78.7218018],
    [22.533164722098, 114.05457223028],
    [36.819684711888, 127.1543899],
    [31.215442926454, 121.45819030495],
    [39.970067331095, 116.49156221457],
    [25.121502707446, 55.2637125],
    [32.044483, 118.7850918],
    [38.7953516, -77.0085405],
    [30.0040799, -90.1597763],
    [38.8975799, -77.0061577],
    [38.9167494, -77.2197647],
    [34.1020008, -118.3240494],
    [38.6542433, -90.3535639],
    [29.7156678, -95.4179464],
    [33.9022637, -118.3859492],
    [34.0701769, -84.2942548],
    [42.3311858, -83.0456609],
    [40.7491823, -73.9759058],
    [32.953466, -96.8178921],
    [32.7665406, -117.1592358],
    [39.9287937, -75.032185],
    [34.0886421, -118.3772907],
    [40.7173936, -73.9606022],
    [43.0720678, -89.4522553],
    [40.797935, -74.340497],
    [42.3929423, -71.0786896],
    [40.7537936, -73.9996904],
    [35.2110826, -80.8610434],
    [40.914763, -74.075323],
    [42.0590521, -87.7494086],
    [37.977669, -84.527654],
    [40.753706, -73.6916675],
    [40.6283872, -75.4834904],
    [41.8284833, -71.400528],
    [40.0084941, -75.2895203],
    [40.800357, -73.413723],
    [33.0841912, -96.8261176],
    [39.7204694, -104.9580501],
    [40.0883411, -75.3878305],
    [38.7734303, -121.269432],
    [47.6634776, -122.2993689],
    [42.394347062814, -71.070958139225],
    [39.5623837, -104.8748969],
    [41.0315014, -73.7585815],
    [38.9063161, -77.0418191],
    [41.7232377, -72.7585723],
    [32.8717718, -117.2130685],
    [32.8958188, -96.80276],
    [33.4487338, -86.731775],
    [41.3173691, -74.1283654],
    [40.7635183, -73.9823457],
    [42.3521288, -71.0466554],
    [40.8067696, -73.9424573],
    [38.8804819, -77.1109416],
    [42.425436, -83.4322541],
    [42.6816118, -83.1939467],
    [40.7808622, -73.9765412],
    [37.324035, -121.9464667],
    [38.9285708, -94.4165173],
    [36.161162, -86.779136],
    [43.0340765, -87.908443],
    [41.8816433, -87.625001],
    [30.2558811, -97.7628877],
    [37.7979025, -122.4353553],
    [37.808889, -122.269107],
    [34.1614673, -118.5128237],
    [26.1554233, -80.1176027],
    [39.2148898, -76.8612603],
    [38.8803297, -77.0264724],
    [32.7883403, -97.3477735],
    [33.3071565, -111.746535],
    [40.6294439, -111.8897841],
    [34.1820143, -118.3097105],
    [40.9279449, -73.8544953],
    [35.0342937, -80.8063307],
    [35.93626, -86.82637],
    [40.8887363, -74.251075],
    [39.0420877, -94.590388],
    [32.941839, -97.128692],
    [34.0596051, -118.4194354],
    [41.8927536, -87.6260762],
    [45.0936632, -93.438],
    [39.9568806, -86.0019993],
    [40.7511815, -73.9882038],
    [39.2872674, -76.6093536],
    [40.7104647, -74.0089084],
    [40.7588595, -73.9712746],
    [40.7377846, -74.0303808],
    [40.875488, -74.4279945],
    [42.2570162, -83.6989059],
    [25.7648362, -80.1948093],
    [33.0830322, -117.2669227],
    [29.4547897, -98.4717929],
    [44.8554524, -93.242645],
    [33.9232565, -84.3400292],
    [40.8080586, -73.9640084],
    [33.5103093, -112.0725505],
    [34.0202338, -118.4974586],
    [39.5545106, -105.0076672],
    [40.953484, -74.0735936],
    [30.3992763, -97.7253922],
    [40.7345605, -73.8706424],
    [41.8525372, -87.9492598],
    [39.4015618, -76.6017709],
    [39.7478937, -105.057705],
    [25.957547, -80.1436741],
    [41.3068367, -72.9285224],
    [26.8484172, -80.0838296],
    [41.7194698, -87.7231993],
    [40.5831343, -74.6149222],
    [26.15479, -80.3218353],
    [40.7437611, -73.6106419],
    [39.9501041, -75.160056],
    [29.739212, -95.4635009],
    [37.538057, -122.301778],
    [39.8949287, -74.9341668],
    [34.1587921, -118.8199086],
    [28.486741, -81.4285959],
    [44.8832196, -93.3284255],
    [36.8430348, -76.1306889],
    [40.2876987, -74.0560827],
    [39.6724418, -75.6504291],
    [25.6440034, -80.335541],
    [32.7934366, -96.8031548],
    [27.3855325, -82.4554441],
    [33.5036822, -111.9293812],
    [42.5630174, -83.185384],
    [42.2313202, -71.1765604],
    [33.9854311, -118.3933176],
    [47.6860654, -122.1956143],
    [42.3619352, -71.1574236],
    [25.6902251, -80.3135991],
    [40.7152344, -74.0149039],
    [42.051193, -88.0384605],
    [30.1645185, -95.4538295],
    [26.365754, -80.1148542],
    [40.7408761, -73.9879814],
    [36.1023786, -115.1745465],
    [32.7256672, -117.1694249],
    [47.6169866, -122.3384],
    [40.5811274, -74.1654888],
    [41.8782379, -87.635791],
    [33.8373665, -84.3802425],
    [40.550462, -111.89177],
    [40.730311, -73.989496],
    [33.977949, -118.438098],
    [34.1428234, -118.254569],
    [39.9774834, -83.0032475],
    [41.3800517, -73.4817327],
    [40.8673389, -73.8306815],
    [39.9146201, -86.11124],
    [39.5955771, -104.8962267],
    [40.7196823, -73.8438591],
    [32.9518361, -117.2358071],
    [40.6457254, -74.07776],
    [36.1619472, -115.1581889],
    [39.7712478, -86.1548176],
    [42.2409903, -87.9424228],
    [27.9533147, -82.5023048],
    [32.8687357, -96.7718582],
    [41.1090726, -74.0529682],
    [41.9462157, -87.6555041],
    [33.6238252, -111.9257907],
    [40.1159439, -75.2819933],
    [39.7623533, -104.9809164],
    [42.3722402, -71.1209764],
    [37.9481371, -122.5094055],
    [28.4459681, -81.3954724],
    [29.7591983, -95.3633981],
    [38.8639404, -77.0601179],
    [29.7449774, -95.3920533],
    [29.9512926, -90.065744],
    [40.6921225, -73.9886067],
    [25.7907428, -80.1406777],
    [32.9026999, -96.9589124],
    [42.5623699, -83.164607],
    [40.7584956, -73.989167],
    [42.3226262, -71.1696836],
    [39.9511265, -75.1738353],
    [35.7386641, -78.7776837],
    [41.453493, -81.486092],
    [33.7535491, -84.3655673],
    [37.7839767, -122.4054904],
    [39.0241983, -77.1451289],
    [40.7548641, -73.9854363],
    [28.5978865, -81.3661609],
    [35.4431193, -80.8828748],
    [40.0519075, -82.915731],
    [40.7789041, -73.9549827],
    [34.1877649, -118.6060928],
    [42.5042626, -71.1321979],
    [40.2932861, -74.6848621],
    [33.7561215, -118.1093702],
    [41.500334, -81.689174],
    [37.4442875, -122.1710802],
    [35.172716, -80.848515],
    [41.0284274, -73.7910369],
    [38.8973122, -77.0239875],
    [41.1386776, -73.299248],
    [36.0209574, -115.087652],
    [40.7527262, -73.9772294],
    [40.6827552, -73.9765082],
    [40.0879055, -75.3897629],
    [32.852135, -96.7685081],
    [42.4822898, -71.2135439],
    [40.8700624, -73.128329],
    [45.5014112, -122.8058431],
    [40.7031062, -73.9940252],
    [28.3879501, -81.4904099],
    [40.7291643, -74.0055851],
    [42.3496398, -71.081556],
    [38.9135166, -94.6462054],
    [28.3947462, -81.4847411],
    [28.4440373, -81.4700012],
    [36.1029949, -86.8169347],
    [38.8766494, -77.0068096],
    [38.6416041, -90.2617923],
    [41.0702217, -73.4766614],
    [42.3566921, -71.0585433],
    [41.8854108, -87.6519791],
    [25.70916, -80.2823518],
    [36.1515796, -115.3319668],
    [39.9537815, -75.1885748],
    [40.1421007, -82.9815932],
    [34.0447456, -118.2562332],
    [40.0166748, -105.2558663],
    [39.0407214, -77.1589931],
    [34.1328418, -118.1470301],
    [29.5180415, -98.4994042],
    [38.9089089, -77.0322875],
    [38.9089089, -77.0322875],
    [38.9089089, -77.0322875],
    [38.9089089, -77.0322875],
    [38.9089089, -77.0322875],
    [38.9089089, -77.0322875],
    [38.9089089, -77.0322875],
    [38.9089089, -77.0322875],
    [25.681384107636, -100.3549017],
    [38.627091612689, -90.20285785],
    [38.5683756, -121.4871238],
    [38.9091097, -77.0321566],
  ]

  for (let i = 0; i < backup.length; i++) {
    const test = L.circle(backup[i], {
      radius: 50 * METERS_TO_MILES,
      stroke: false,
      color: 'green',
    }).addTo(map)

    locations.push(test)
  }
  //   shakeShacks.then((shacks) => {
  //     console.log(shacks)
  //     for (let i = 0; i < shacks.length; i++) {
  //       const test = L.circle(shacks[i], {
  //         radius: 50 * METERS_TO_MILES,
  //         stroke: false,
  //         color: 'green',
  //       }).addTo(map)

  //       locations.push(test)
  //     }
  //   })
}

// Get Habit Burgers
// const habits = fetch(
//   'https://afternoon-thicket-58511.herokuapp.com/https://www.habitburger.com/locations/'
// )
//   .then((response) => response.text())
//   .then((pageText) => {
//     const regexp = /all_us_latlngs\.push\( { lat: ([-\d\.]*), lng: ([-\d\.]*)/gm

//     const locations = [...pageText.matchAll(regexp)]

//     const habits = []

//     for (let location of locations) {
//       let newLocation = [parseFloat(location[1]), parseFloat(location[2])]
//       habits.push(newLocation)
//     }

//     return habits
//   })

const mapHabits = () => {
  const backup = [
    [32.7956909, -117.2516973],
    [34.146624, -118.759132],
    [37.786804, -122.280258],
    [37.884462, -122.297336],
    [34.095361, -118.125711],
    [33.571129, -117.724251],
    [40.382208, -111.813754],
    [33.8037807, -117.9061509],
    [33.867965, -117.747957],
    [37.962912, -121.73647],
    [38.004028, -121.835308],
    [39.067013, -77.485021],
    [35.483276, -120.661207],
    [37.343282, -120.611124],
    [33.464134, -112.279507],
    [34.128291, -117.891908],
    [35.369342, -119.146165],
    [35.2970783, -119.0743943],
    [35.367753, -119.046558],
    [35.410998, -119.11049],
    [34.0710218, -117.9770454],
    [47.662394, -122.369327],
    [34.851442, -117.083695],
    [33.9707636, -118.1647006],
    [40.781628772071564, -74.19138264610542],
    [36.033511, -115.207035],
    [26.401136, -80.120508],
    [47.1673508, -122.1564845],
    [40.576775, -74.559494],
    [34.611515, -120.188583],
    [33.858375, -118.030937],
    [34.174396, -118.300477],
    [36.080372483223364, -79.48392083038354],
    [34.2258572, -118.8756623],
    [34.18147186525219, -117.32356839944336],
    [33.9806023, -117.375496],
    [34.2181604, -119.0453108],
    [37.286597, -121.931297],
    [34.2014208, -118.5789546],
    [32.983571, -117.076596],
    [37.697276, -122.074175],
    [33.5380278, -112.0632164],
    [37.594004401547885, -120.94112173038559],
    [33.865902, -118.09354],
    [38.876668, -77.441714],
    [34.238503, -118.571649],
    [39.929315, -75.031553],
    [39.75954876126094, -121.84300105889693],
    [33.983001, -117.713216],
    [39.5322, -119.815361],
    [38.664655, -121.272561],
    [32.818706, -117.181204],
    [36.040497, -80.387386],
    [36.837858, -119.694832],
    [34.0700912, -117.3512061],
    [33.8957672, -118.2227839],
    [37.978953, -122.058239],
    [33.8323183, -117.5309715],
    [33.673573, -117.919979],
    [37.323267, -122.03542],
    [33.80258, -118.013694],
    [37.668881, -122.468573],
    [33.4898832, -117.6982529],
    [26.438498, -80.071291],
    [34.020524, -117.810301],
    [38.456867, -121.841905],
    [33.937346, -118.126659],
    [34.139851, -117.980374],
    [37.708718, -121.930407],
    [37.705012, -121.891518],
    [34.136548, -118.188503],
    [33.975642, -117.557643],
    [40.291672, -74.053243],
    [34.077211, -118.264587],
    [32.74020960495899, -116.94218610214833],
    [32.772325, -115.5513665],
    [33.920019, -118.396394],
    [38.422384, -121.417384],
    [33.046119, -117.257831],
    [34.1602223, -118.5066038],
    [33.128065, -117.090818],
    [40.94328, -74.128853],
    [38.259964458674, -122.05267618033],
    [40.985276, -111.908006],
    [36.1275253, -115.1715],
    [35.054669, -78.973333],
    [35.187012, -111.661258],
    [40.787464, -74.39113],
    [38.668309, -121.15495],
    [40.624129, -111.850875],
    [37.561863, -122.27915],
    [33.713872, -117.953999],
    [37.50173, -121.970029],
    [36.808821, -119.806385],
    [36.781708, -119.789725],
    [36.7864861, -119.8620094],
    [36.858119, -119.783705],
    [33.877888, -117.881995],
    [33.859995, -117.923732],
    [39.148427, -77.207784],
    [33.890767, -118.300688],
    [33.297242, -111.747624],
    [37.002841, -121.552427],
    [34.149641, -118.2462814],
    [33.63882, -112.228481],
    [34.435444, -119.824669],
    [33.3145866, -111.860306],
    [38.74265, -121.225583],
    [36.32766, -119.67343],
    [33.747671, -117.006332],
    [36.058747, -115.046696],
    [33.865155, -118.394008],
    [34.426326, -117.372337],
    [36.11487, -115.15557],
    [33.700905, -117.989623],
    [34.939754, -80.837097],
    [33.945823, -118.329071],
    [33.704595, -117.786956],
    [33.699807, -117.835629],
    [33.648868, -117.832046],
    [34.413197, -119.85524],
    [47.544082, -122.019858],
    [47.359107, -122.169037],
    [40.0851, -75.404248],
    [34.20469, -118.199965],
    [33.082435, -117.233135],
    [32.776706, -117.020213],
    [33.916825, -118.012281],
    [33.708271, -116.28332],
    [34.1154916, -117.7726634],
    [33.618543, -117.702275],
    [34.4825839, -114.3499977],
    [34.276123117484644, -118.39700265897183],
    [34.6751747, -118.1491],
    [36.158526, -115.06188],
    [40.297121, -74.683895],
    [33.94166279652458, -118.40209074562999],
    [41.089621, -111.975638],
    [37.693092, -121.773567],
    [38.115124, -121.307282],
    [34.66206, -120.458374],
    [33.828065, -118.143072],
    [33.78757400072571, -118.13961548781461],
    [34.0451504, -118.2598343],
    [33.9466534, -118.2306894],
    [37.056319, -120.874129],
    [37.797883, -121.195757],
    [39.1432682, -121.5905777],
    [33.6846515, -117.1761736],
    [43.625132, -116.353367],
    [33.3795356, -111.7534545],
    [25.93952062310412, -80.29381591673412],
    [25.769307, -80.357865],
    [33.466018, -112.081625],
    [37.5964472, -122.3864092],
    [32.9131785, -117.1442321],
    [34.259106, -118.466554],
    [32.766703, -117.156814],
    [33.559631, -117.671192],
    [37.670997, -120.994758],
    [34.018878, -118.10592],
    [41.051228, -74.061721],
    [33.937788, -117.276285],
    [33.5548011, -117.1770302],
    [34.157506, -118.3693188],
    [36.278158, -115.205903],
    [36.240281238941, -115.122835579],
    [33.636321, -111.921523],
    [43.609711, -116.5922],
    [38.32109118895, -122.30669821717],
    [34.1922503, -118.9370949],
    [33.8952087, -117.5633276],
    [34.237772, -118.536403],
    [33.918712, -118.0729215],
    [38.102393, -122.571637],
    [37.834882, -122.249608],
    [33.184244, -117.327956],
    [41.2438923, -111.9717415],
    [41.178391, -111.999009],
    [34.0636629, -117.6591145],
    [33.829057, -117.83755],
    [34.2286407, -119.2037461],
    [32.795280302225194, -117.25267098435597],
    [32.7956909, -117.2516973],
    [26.882493, -80.115289],
    [26.809016, -80.088538],
    [33.7209615, -116.3843915],
    [33.801990771543906, -116.38898084793219],
    [34.601329, -118.146049],
    [33.599183, -111.983298],
    [33.8895288, -118.159736],
    [40.869573, -74.421755],
    [34.151239, -118.073328],
    [26.00554, -80.333677],
    [38.254152, -122.63629],
    [33.640594722236365, -111.99494723014321],
    [33.610675260243205, -112.14747634549012],
    [33.43602, -111.997863],
    [33.4954052, -112.1697462],
    [33.982008, -118.098431],
    [37.998235, -122.287127],
    [38.7124047, -120.8418102],
    [26.146946, -80.256237],
    [37.657614, -121.898109],
    [32.752994653141, -117.21005549524],
    [34.176407, -119.214389],
    [34.2755103, -118.5725339],
    [36.080798, -119.043776],
    [32.9554389, -117.0385503],
    [40.263312, -111.668734],
    [38.585648, -121.284315],
    [34.106032, -117.567271],
    [40.572066, -122.352611],
    [34.074591, -117.204851],
    [37.483631, -122.230108],
    [34.133436, -117.39457],
    [46.2566516, -119.3107735],
    [37.505099, -77.605604],
    [40.912602, -74.037605],
    [38.969964, -76.93676],
    [33.955535, -117.390577],
    [33.907096, -117.458105],
    [38.799518, -121.206432],
    [39.074667, -77.136805],
    [38.360709, -122.7234314],
    [33.7747802, -118.3771771],
    [34.074354, -118.072144],
    [38.781929, -121.286491],
    [33.990343, -117.924864],
    [26.669871, -80.201826],
    [34.440579, -118.57755],
    [38.592004, -121.41611],
    [38.569481, -121.467102],
    [38.465157, -121.492678],
    [38.5323627, -121.4952913],
    [36.713852, -121.654222],
    [47.61510542168142, -122.0351241010951],
    [33.458015570366, -117.65084218852],
    [34.111758, -117.828399],
    [33.77088336634424, -116.95916550212176],
    [37.258722, -121.875617],
    [37.382373, -121.896326],
    [37.314622, -121.871605],
    [37.723312, -122.153332],
    [35.27984, -120.662748],
    [33.136188, -117.178947],
    [37.544786, -122.291073],
    [37.778689, -121.96944],
    [36.622932, -121.842976],
    [40.5450025, -111.89166],
    [33.7735474, -117.866844],
    [33.7114947, -117.8857413],
    [34.418598, -119.697403],
    [34.438473, -119.749825],
    [34.419155, -119.676041],
    [37.351841, -121.959902],
    [34.392556, -118.466727],
    [36.983754, -122.022449],
    [34.924068, -120.420128],
    [34.039274, -118.473751],
    [38.45676, -122.72679],
    [32.7720012, -117.0726966],
    [33.78240561008871, -118.07156971665137],
    [36.5772571, -119.631557],
    [47.776982, -122.343586],
    [47.6636101, -122.6964749],
    [34.286786, -118.716784],
    [32.995182, -117.254801],
    [37.9759777, -120.3431453],
    [34.043513, -118.032097],
    [33.952465, -118.18397],
    [40.5623204, -111.9386203],
    [38.285764, -122.274277],
    [34.115674, -118.150724],
    [39.531783, -119.717403],
    [37.106772, -113.554613],
    [37.984598, -121.347109],
    [40.724566, -111.861121],
    [37.3678193, -122.0331358],
    [34.2996579, -118.4400862],
    [47.271676, -122.515426],
    [34.990567, -118.941964],
    [34.2594754, -119.2343791],
    [33.4815323, -117.0981442],
    [33.36281, -111.910732],
    [33.334185, -111.966117],
    [40.861126, -74.061509],
    [34.278444, -119.293294],
    [34.181624, -118.874757],
    [33.8378548, -118.3548011],
    [39.3925121, -76.6126392],
    [37.755872, -121.463792],
    [32.221946, -110.870642],
    [32.164619, -110.989619],
    [47.450563, -122.263029],
    [36.224332, -119.333202],
    [37.515893, -120.87853],
    [33.7380478, -117.8216751],
    [42.5958061, -114.45842],
    [33.9737055, -117.3280644],
    [37.5998616, -122.0684377],
    [40.682613, -74.233957],
    [34.136108, -118.3537141],
    [39.544584, -119.8160279],
    [34.132281, -117.636401],
    [34.108525, -117.670619],
    [34.02021449456799, -118.28580439243315],
    [38.367827, -121.96113],
    [34.4050434, -118.5519782],
    [38.133259, -122.216595],
    [34.202091, -118.449047],
    [34.462401, -117.353563],
    [36.324997, -119.313682],
    [33.193758, -117.250519],
    [38.627607, -76.910506],
    [37.895205, -122.062561],
    [37.926581, -122.063177],
    [40.9596728, -74.229266],
    [34.073747, -117.882659],
    [40.611281, -111.985477],
    [47.5638749, -122.3764272],
    [34.273771, -118.797412],
    [34.161362, -118.824204],
    [33.74272, -118.006502],
    [33.945213, -117.996398],
    [33.5933764, -117.2451108],
    [42.5876814, -71.1579159],
    [38.6769965, -121.7585704],
    [34.1671813, -118.620775],
    [46.5850722, -120.5404327],
    [33.889038, -117.81317],
    [39.1323249, -121.6335466],
  ]

  for (let i = 0; i < backup.length; i++) {
    const test = L.circle(backup[i], {
      radius: 50 * METERS_TO_MILES,
      stroke: false,
      color: 'red',
    }).addTo(map)

    locations.push(test)
  }

  // habits.then((list) => {
  //   console.log(list)
  //   for (let i = 0; i < list.length; i++) {
  //     const test = L.circle(list[i], {
  //       radius: 50 * METERS_TO_MILES,
  //       stroke: false,
  //       color: 'red',
  //     }).addTo(map)

  //     locations.push(test)
  //   }
  // })
}

// Get Waffle Houses
const houses = fetch(
  'https://afternoon-thicket-58511.herokuapp.com/https://wafflehouse.locally.com/stores/conversion_data?has_data=true&company_id=117995&store_mode=&style=&color=&upc=&category=&inline=1&show_links_in_list=&parent_domain=&map_center_lat=33.31835099903524&map_center_lng=-98.93582819777568&map_distance_diag=1986.3015965219763&sort_by=proximity&no_variants=0&only_retailer_id=&dealers_company_id=&only_store_id=false&uses_alt_coords=false&q=false&zoom_level=5&lang=en-us'
)
  .then((response) => response.json())
  .then((listing) => {
    let list = []
    for (let location of listing.markers) {
      list.push([location.lat, location.lng])
    }

    return list
  })

const mapWaffleHouses = () => {
  houses.then((list) => {
    for (let i = 0; i < list.length; i++) {
      const test = L.circle(list[i], {
        radius: 50 * METERS_TO_MILES,
        stroke: false,
        color: 'blue',
      }).addTo(map)

      locations.push(test)
    }
  })
}

const slider = document.getElementById('myRange')
const range = document.getElementById('radius')

slider.addEventListener('input', (e) => {
  range.innerHTML = e.target.value
  for (let i = 0; i < locations.length; i++) {
    locations[i].setRadius(e.target.value * METERS_TO_MILES)
  }
})

mapShakeShacks()
mapHabits()
mapWaffleHouses()

// map.on('click', onMapClick)
